<div ng-controller="game-event-controller" ng-init="get_upcoming_games(); get_current_games();" onload="init();">
  
  <!-- button for adding new game-->
 
  <a href="javascript:void(0)" class="ui add-btn" id="add-game"><i class="fa fa-plus fa-3x"></i></a>

  <!-- Contents -->
  <div class="row contents">
    <h3 class="content-header">GAMES</h3>
    <div class="ui search">
      <div class="ui icon input">
        <input class="prompt" placeholder="Search User" type="text">
        <i class="search icon"></i>
      </div>
      <div class="results"></div>
    </div>
    <h3>Current Games</h3>
    <div class="ui four stackable special cards" ng-if="profile.is_admin == 1">
        <div class="card" ng-repeat="(index, game) in current_games">
          <div class="blurring dimmable image">
            <div class="ui dimmer">
              <div class="content">
                <div class="center">
                  <a href="javascript:void(0)" class="ui inverted button edit-game" ng-click="setup_edit_modal('current', index)">Edit</a>
                  <a href="javascript:void(0)" class="ui inverted red button" id="remove-game" ng-click="delete_game('current',index)">Remove</a>
                </div>
              </div>
            </div>
            <img src="../img/games.png">
          </div>
          <div class="content">
            <span class="header">{{game.game_name}}</span>
            <div class="meta">
              Start: <br/>
              <span>{{game.game_starting_time_date | date: 'fullDate'}}</span>
              <br/>
              End: <br/>
              <span>{{game.game_ending_time_date | date: 'fullDate'}}</span>
            </div>
          </div>
          <div class="extra content">
            <a href="javascript:void(0)" class="fluid ui blue button view-more" ng-click="view_setup(game.game_id, index, 'current'); check_if_registered()">View More</a>
          </div>
        </div>  
    </div>
    <div class="ui four stackable cards" ng-if="profile.is_admin != 1">
        <div class="card" ng-repeat="(index, game) in current_games">
          <div class="image">
            <img src="../img/games.png">
          </div>
          <div class="content">
            <span class="header">{{game.game_name}}</span>
            <div class="meta">
              Start: <br/>
              <span>{{game.game_starting_time_date | date: 'fullDate'}}</span>
              <br/>
              End: <br/>
              <span>{{game.game_ending_time_date | date: 'fullDate'}}</span>
            </div>
          </div>
          <div class="extra content">
            <a href="javascript:void(0)" class="fluid ui blue button view-more" ng-click="view_setup(game.game_id, index, 'current'); check_if_registered()">View More</a>
          </div>
        </div>  
    </div>
    
    <h3>Upcoming Games</h3>
    <div class="ui three stackable special cards" ng-if="profile.is_admin == 1">
        <div class="card" ng-repeat="(index, game) in upcoming_games">
          <div class="blurring dimmable image">
            <div class="ui dimmer">
              <div class="content">
                <div class="center">
                  <a href="javascript:void(0)" class="ui inverted button" ng-click="setup_edit_modal('current', index)">Edit</a>
                  <a href="javascript:void(0)" class="ui inverted button" ng-click="delete_game('current',index)">Remove</a>
                </div>
              </div>
            </div>
            <img src="../img/strategy.png">
          </div>
          <div class="content">
            <span class="header game-title">{{game.game_name}}</span>
            <div class="meta">
              Start: <br/>
              <span>{{game.game_starting_time_date}}</span>
              <br/>
              End: <br/>
              <span>{{game.game_ending_time_date}}</span>
            </div>
          </div>
          <div class="extra content">
            <a href="javascript:void(0)">View More</a>
          </div>
        </div>  
    </div>
    <div class="ui three stackable cards" ng-if="profile.is_admin != 1">
        <div class="card" ng-repeat="(index, game) in upcoming_games">
          <div class="image">
            <img src="../img/strategy.png">
          </div>
          <div class="content">
            <span class="header game-title">{{game.game_name}}</span>
            <div class="meta">
              Start: <br/>
              <span>{{game.game_starting_time_date}}</span>
              <br/>
              End: <br/>
              <span>{{game.game_ending_time_date}}</span>
            </div>
          </div>
          <div class="extra content">
            <a href="javascript:void(0)">View More</a>
          </div>
        </div>  
    </div>
  </div>


  <div class="ui modal" id="add-game-modal">
    <i class="close icon"></i>
    <div class="header add-game-header">Add Game</div>
    <div class="content">
      <form class="ui big form">
        <div class="field">
          <label>Game Name</label>
          <input placeholder="Game Name" type="text" ng-model="info.username">
        </div>
        <div class="two fields">
          <div class="ui calendar field" id="start-date">
            <label>Start Date</label>
            <div class="ui input left icon">
              <i class="calendar icon"></i>
              <input type="text" placeholder="Date">
            </div>
          </div>

          <div class="ui calendar field" id="end-date">
            <label>End Date</label>
            <div class="ui input left icon">
              <i class="calendar icon"></i>
              <input type="text" placeholder="Date">
            </div>
          </div>
        </div>
        <table class="ui celled table" id="tbl">
         <thead>
          <tr><th>Team Name</th>
          <th>Team Color</th>
        </tr></thead>
         <tr ng-repeat = "team in teams track by $index">
          <td><input placeholder="Name" type="text" name="links" ng-model = "team.team_name"/></td>
          <td><input placeholder="Color" type="text" name="keywords" ng-model = "team.team_color"/></td> 
        </tr>
        </table>
        <div class="team-button">
          <input type="button" class="ui button" id="another" value="Add another line" ng-click = "append_fills()"/>
        </div>
      </form>
    </div>
    <div class="actions">
      <div class="ui button modal-close">Cancel</div>
      <div class="ui button modal-close green" ng-click="add_game()">Submit</div>
    </div>
  </div>

  <div class="ui modal" id="edit-game-modal">
    <i class="close icon"></i>
    <div class="header edit-game-header">Edit Game</div>
    <div class="content">
      <form class="ui large form">
        <div class="field">
          <label>Game Name</label>
          <input placeholder="Game Name" type="text" ng-model="edit_game_info.game_name">
        </div>
        <div class="two fields">
          <div class="ui calendar field" id="edit-start-date">
            <label>Start Date</label>
            <div class="ui input left icon">
              <i class="calendar icon"></i>
              <input type="text" placeholder="Date" ng-model="edit_game_info.game_starting_time_date">
            </div>
          </div>

          <div class="ui calendar field" id="edit-end-date">
            <label>End Date</label>
            <div class="ui input left icon">
              <i class="calendar icon"></i>
              <input type="text" placeholder="Date" ng-model="edit_game_info.game_ending_time_date">
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="actions">
      <div class="ui button modal-close">Cancel</div>
      <div class="ui button modal-close" ng-click="edit_game()">Submit</div>
    </div>
  </div>

  <!-- Modal Structure -->
  <div id="view-more-modal" class="ui basic small modal">
    <div class="ui header">
      Select Option
    </div>
    <div class="content">
      <form class="ui small center form" id="vopt">
        <div class="ui button inverted modal-close" id="vspn" ng-click="view_sponsor()">View Sponsor</div>
        <br/>
        <div class="ui button inverted modal-close" id="vspt" ng-click="view_sports()">View Sports</div>
        <br/>
        <div class="ui button inverted modal-close" id="vp" ng-click="view_registered_user()">View Participants</div>
        <br/>
        <div class="ui button inverted modal-close reg-to-game" id="rttg" ng-click="get_teams()">Register to this Game</div>
      </form>
    </div>
  </div>

  <div id="choose-team-modal" class="ui modal">
    <i class="close icon"></i>
    <div class="header">Choose a Team</div>
    <div class="content">
      <div class="ui big form">
        <div class="field">
          <label>Team</label>
          <select class="ui search dropdown">
            <option value="">Team Name</option>
            <option value="{{team.team_name}}" ng-repeat="team in teams">{{team.team_name}}</option>
          </select>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui button modal-close">Cancel</div>
      <div class="ui button modal-close green" ng-click="join_account_to_team()">Submit</div>
    </div>
  </div>
</div>


<script>
$(document).ready(function(){
  $('.special.cards .image').dimmer({
    on: 'hover'
  });

  $('.ui.dropdown').dropdown();

  $("#add-game").click(function() {
    $('#add-game-modal').modal({
      onShow: function(){
        $('#start-date').calendar({
          type: 'date'
        });
        $('#end-date').calendar({
          type: 'date'
        });
      }
    }).modal('show');
    $("#add-game-modal").modal("show");
  });

  $("#remove-game").click(function() {
    $("#remove-game-modal").modal("show");
  });

  $(".edit-game").click(function() {
    $("#edit-game-modal").modal({
      onShow: function() {
        $('#edit-start-date').calendar({
          type: 'date'
        });

        $('#edit-end-date').calendar({
          type: 'date'
        });
      }
    }).modal("show");
  });

  $(".view-more").click(function() {
    $("#view-more-modal").modal("show");
  });

  $('.modal-close').click(function() {
    $('.ui.modal').modal('hide');
  });

  $('.ui.radio.checkbox').checkbox();

  $('.reg-to-game').click(function() {
    $('#choose-team-modal').modal("show");
  });
});

</script>  


<div ng-controller="login-register-controller" ng-init="restrict()"></div>
<div ng-controller="profile-controller" ng-init="init_profile()">

	<div class="row contents">
		<div class="ui raised very padded text segment" id="personal-info">
			<div class="profile-pic">
				<img src="../img/user.png">
				<div>
					<a href="javascript:void(0)" class="ui inverted blue button edit-profile" ng-if="profile.is_admin==1 || userprofile.account_id==profile.account_id" ng-click="setup_edit_profile()">Edit</a>
					<a href="javascript:void(0)" class="ui inverted red button remove-profile" ng-if="profile.is_admin==1 || userprofile.account_id==profile.account_id" ng-click="remove_profile()">Remove</a>
				</div>
			</div>
			<div id="info">
        <div class="info-field">Name: {{ userprofile.firstname + " " + userprofile.middlename + " " +userprofile.lastname}}</div>
				<div class="info-field">College: {{ userprofile.college }}</div>
				<div class="info-field">Course: {{ userprofile.course }}</div>
				<div class="info-field">Birthday: {{ userprofile.birthday | date: 'longDate'}}</div>
				<div class="info-field">Email: {{ userprofile.email }}</div>
				<div class="info-field" ng-show="userprofile.is_player">Jersey Number: #{{ userprofile.player_jersey_num }}</div>
				<div class="info-field" ng-show="userprofile.is_player">Player Role: {{ userprofile.player_role }}</div>
				<div class="info-field" ng-show="userprofile.is_game_head || userprofile.is_admin">Position: {{ profile.position }}</div>
			</div>
		</div>

    <div class="ui three column doubling stackable grid container" ng-show="userprofile.is_player">
      <div class="column">
        <div class="ui raised very padded text container segment" id="events_played">
          <h1 class="ui header">ONGOING EVENTS</h1>
          <div class="ui fluid styled accordion">
            <div ng-repeat="user_ongoing_event in user_ongoing_events">
              <h5 class="title">{{ user_ongoing_event.game_name }}</h5>
              <div class="content">
                <h5>Start: {{ user_ongoing_event.game_starting_time_date | date: 'fullDate'}}</h5>
                <h5>End: {{ user_ongoing_event.game_ending_time_date | date: 'fullDate'}}</h5>
                <a href="#!/sports/{{user_ongoing_event.game_id}}"><button class="ui blue button">View Game</button></a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="ui raised very padded text container segment" id="upcoming_events">
          <h1 class="ui header">UPCOMING EVENTS</h1>
          <div class="ui fluid styled accordion">
            <div ng-repeat="user_upcoming_event in user_upcoming_events">
              <h5 class="title">{{ user_upcoming_event.game_name }}</h5>
              <div class="content">
                <h5>Start: {{ user_upcoming_event.game_starting_time_date | date: 'fullDate'}}</h5>
                <h5>End: {{ user_upcoming_event.game_ending_time_date | date: 'fullDate'}}</h5>
                <a href="#!/sports/{{user_upcoming_event.game_id}}"><button class="ui blue button">View Game</button></a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="ui raised very padded text container segment" id="events_played">
          <h1 class="ui header">PLAYED EVENTS</h1>
          <div class="ui fluid styled accordion">
            <div ng-repeat="user_past_event in user_past_events">
              <h5 class="title">{{ user_past_event.game_name }}</h5>
              <div class="content">
                <h5>Start: {{ user_past_event.game_starting_time_date | date: 'fullDate'}}</h5>
                <h5>End: {{ user_past_event.game_ending_time_date | date: 'fullDate'}}</h5>
                <a href="#!/sports/{{user_past_event.game_id}}"><button class="ui blue button">View Game</button></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="ui modal" id="edit-profile-modal">
    <i class="close icon"></i>
    <div class="header edit-profile-header">Edit Profile</div>
    <div class="content">
      <form class="ui big form">
        <div class="three fields">
          <div class="field">
            <label>First name</label>
            <input placeholder="First Name" type="text" ng-model="edit_profile.firstname">
          </div>
          <div class="field">
            <label>Middle name</label>
            <input placeholder="Middle Name" type="text" ng-model="edit_profile.middlename">
          </div>
          <div class="field">
            <label>Last name</label>
            <input placeholder="Last Name" type="text" ng-model="edit_profile.lastname">
          </div>
        </div>
        <div class="field">
          <label>Email Address</label>
          <input placeholder="Email Address" type="text" ng-model="edit_profile.email">
        </div>
        <div class="field">
          <label>Username</label>
          <input placeholder="Username" type="text" ng-model="edit_profile.username">
        </div>
        <div class="three fields">
          <div class="ui calendar field" id="edit-birthday">
            <label>Birthday</label>
            <div class="ui input left icon">
              <i class="calendar icon"></i>
              <input type="text" placeholder="Date" ng-model="edit_profile.birthday">
            </div>
          </div>

          <div class="field">
            <label>Course</label>
            <input placeholder="Course" type="text" ng-model="edit_profile.course">
          </div>

          <div class="field">
            <label>College</label>
            <select class="ui dropdown" id="college" ng-model="edit_profile.college">
              <option value="">College</option>
              <option value="CA">CA</option>
              <option value="CAS">CAS</option>
              <option value="CDC">CDC</option>
              <option value="CEAT">CEAT</option>
              <option value="CEM">CEM</option>
              <option value="CFNR">CFNR</option>
              <option value="CHE">CHE</option>
              <option value="CPAf">CPAf</option>
              <option value="CVM">CVM</option>
              <option value="SESAM">SESAM</option>
              <option value="GS">GS</option>
            </select>
          </div>
        </div>
        <div class="field" ng-show="edit_profile.is_game_head">
          <label>Position</label>
          <input placeholder="Position" type="text" ng-model="edit_profile.position">
        </div>
        <div class="two fields">
          <div ng-show="edit_profile.is_player" class="field">
            <label>Player Role</label>
            <input placeholder="Player Role" type="text" ng-model="edit_profile.player_role">
          </div>
          <div ng-show="edit_profile.is_player" class="field">
            <label>Jersey Number</label>
            <input placeholder="Jersey Number" type="number" ng-model="edit_profile.player_jersey_num">
          </div>
        </div>
      </form>
    </div>
    <div class="actions">
      <div class="ui button modal-close">Cancel</div>
      <div class="ui button green modal-close" ng-click="edit_prof()">Submit</div>
    </div>
  </div>
</div>

<script type="text/javascript">
$(document).ready(function(){  
  $('.ui.accordion').accordion();

  var maxDate = new Date();
  maxDate.setFullYear(maxDate.getFullYear());
  $(".edit-profile")
    .click(function() {
      $("#edit-profile-modal")
        .modal({
          onShow: function() {
            $('#edit-birthday').calendar({
              type: 'date',
              maxDate: maxDate
            });
          }
        })
        .modal("show");
    });
});
</script>